<?xml version="1.0" encoding="UTF-8"?>
<htd:humanInteractions xmlns:htd="http://www.example.org/WS-HT"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:tns="http://www.insurance.example.com/claims/"
    targetNamespace="http://www.insurance.example.com/claims/"
    xsi:schemaLocation="http://www.example.org/WS-HT ws-humantask.xsd">
    
    <!-- 
        
        Test human task definition. Contains: task definitions, different human roles definitions,
        descriptions with parameters.
        
        TODO:
         
         - matching business request
        
    -->
    
    <htd:import importType="http://schemas.xmlsoap.org/wsdl/" location="ExampleTasks.wsdl" namespace="http://www.insurance.example.com/claims/"/>
    
    <htd:logicalPeopleGroups>
    
    	<htd:logicalPeopleGroup name="employees">
            <htd:documentation xml:lang="en-US">Employee group.</htd:documentation>
            <htd:parameter name="region" type="xsd:string"/>
        </htd:logicalPeopleGroup>
        
    	<htd:logicalPeopleGroup name="managers">
            <htd:documentation xml:lang="en-US">Managers group.</htd:documentation>
            <htd:parameter name="region" type="xsd:string"/>
        </htd:logicalPeopleGroup>

    </htd:logicalPeopleGroups>
    
    <htd:tasks>
    
        <htd:task name="ApproveClaim1">
            
            <htd:documentation xml:lang="en-US">This task is used to handle claims that require manual approval. </htd:documentation>
            <htd:interface portType="tns:ClaimsHandlingPT" operation="approve" responsePortType="tns:ClaimsHandlingCallbackPT" responseOperation="approvalResponse"/>
            <htd:priority> htd:getInput("ClaimApprovalRequest")/prio </htd:priority>
            
            <htd:peopleAssignments>
            	
            	<htd:potentialOwners>
                    <htd:from logicalPeopleGroup="employees">
                        <htd:argument name="region"> htd:getInput("ClaimApprovalRequest")/region </htd:argument>
                    </htd:from>
                </htd:potentialOwners>
                
                <htd:potentialOwners>
                    <htd:literal>
                        <htd:organizationalEntity>
                            <htd:groups>
                                <htd:group>group1</htd:group>
                                <htd:group>group2</htd:group>
                            </htd:groups>
                            <htd:users>
                                <htd:group>user1</htd:group>
                                <htd:group>user2</htd:group>
                            </htd:users>
                        </htd:organizationalEntity>
                    </htd:literal>
                </htd:potentialOwners>

                <htd:potentialOwners>
                    <htd:from logicalPeopleGroup="managers">
                        <htd:argument name="region"> htd:getInput("ClaimApprovalRequest")/region </htd:argument>
                    </htd:from>
                </htd:potentialOwners>
                
                <htd:businessAdministrators>
                    <htd:from logicalPeopleGroup="managers">
                        <htd:argument name="region"> htd:getInput("ClaimApprovalRequest")/region </htd:argument>
                    </htd:from>
                </htd:businessAdministrators>
                
            </htd:peopleAssignments>
            
            <htd:delegation potentialDelegatees="nobody"/>
            
            <htd:presentationElements>
                
                <htd:name xml:lang="en-US"> Approve Claim </htd:name>
                
                <htd:presentationParameters>
                    
                    <htd:presentationParameter name="firstname" type="xsd:string">
                        htd:getInput("ClaimApprovalRequest")/cust/firstname </htd:presentationParameter>
                    
                    <htd:presentationParameter name="lastname" type="xsd:string">
                        htd:getInput("ClaimApprovalRequest")/cust/lastname </htd:presentationParameter>
                    
                    <htd:presentationParameter name="euroAmount" type="xsd:double">
                        htd:getInput("ClaimApprovalRequest")/amount </htd:presentationParameter>
                        
                </htd:presentationParameters>
                
                <htd:subject xml:lang="en-US"> Approve the insurance claim for â‚¬$euroAmount$ on
                    behalf of $firstname$ $lastname$ </htd:subject>

                <htd:description xml:lang="en-US" contentType="text/plain"> Approve this claim
                    following corporate guideline #4711.0815/7 ... </htd:description>

            </htd:presentationElements>
            
        </htd:task>    

    </htd:tasks>    

</htd:humanInteractions>
